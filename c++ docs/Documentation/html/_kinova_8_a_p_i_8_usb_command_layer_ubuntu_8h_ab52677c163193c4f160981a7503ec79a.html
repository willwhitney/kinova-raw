<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Kinova API Documentation: SendJoystickCommand</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Kinova API Documentation
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_kinova_8_a_p_i_8_usb_command_layer_ubuntu_8h_ab52677c163193c4f160981a7503ec79a.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="contents">
<a class="anchor" id="ab52677c163193c4f160981a7503ec79a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KINOVAAPIUSBCOMMANDLAYER_API int SendJoystickCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_joystick_command.html">JoystickCommand</a>&#160;</td>
          <td class="paramname"><em>joystickCommand</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sends a virtual joystick command to the robotical arm. The behaviour of the robotical arm is determined by the control mapping associated with the API (index 2). In the example, we assume that the robotical arm uses the default mapping of the API and that it is in mode B0 (Joystick translation). If that is the case, the robotical arm should move along the Z axis. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">joystickCommand</td><td>The command that you need to send to the robotical arm.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;dlfcn.h&gt;</span> <span class="comment">//Ubuntu</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_kinova_types_8h.html">KinovaTypes.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_kinova_8_a_p_i_8_comm_layer_ubuntu_8h.html">Kinova.API.CommLayerUbuntu.h</a>&gt;</span></div><div class="line"><span class="comment">//Note that under windows, you may/will have to perform other #include</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">        <span class="keywordtype">int</span> result;</div><div class="line"></div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;SendJoystickCommand function example&quot;</span> &lt;&lt; endl;</div><div class="line"></div><div class="line">        <span class="comment">//Handle for the library&#39;s command layer.</span></div><div class="line">        <span class="keywordtype">void</span> * commandLayer_handle;</div><div class="line"></div><div class="line">        <span class="comment">//Function pointers to the functions we need</span></div><div class="line">        int (*MyInitAPI)();</div><div class="line">        int (*MyCloseAPI)();</div><div class="line">        int (*MySendJoystickCommand)(<a class="code" href="struct_joystick_command.html">JoystickCommand</a> command);</div><div class="line">        int (*MyStartControlAPI)();</div><div class="line">        int (*MyMoveHome)();</div><div class="line"></div><div class="line">        <span class="comment">//We load the library (Under Windows, use the function LoadLibrary)</span></div><div class="line">        commandLayer_handle = dlopen(<span class="stringliteral">&quot;Kinova.API.USBCommandLayerUbuntu.so&quot;</span>,RTLD_NOW|RTLD_GLOBAL);</div><div class="line"></div><div class="line">        <span class="comment">//We load the functions from the library (Under Windows, use GetProcAddress)</span></div><div class="line">        MyInitAPI = (int (*)()) dlsym(commandLayer_handle,<span class="stringliteral">&quot;InitAPI&quot;</span>);</div><div class="line">        MyCloseAPI = (int (*)()) dlsym(commandLayer_handle,<span class="stringliteral">&quot;CloseAPI&quot;</span>);</div><div class="line">        MySendJoystickCommand = (int (*)(<a class="code" href="struct_joystick_command.html">JoystickCommand</a>)) dlsym(commandLayer_handle,<span class="stringliteral">&quot;SendJoystickCommand&quot;</span>);</div><div class="line">        MyStartControlAPI = (int (*)()) dlsym(commandLayer_handle,<span class="stringliteral">&quot;StartControlAPI&quot;</span>);</div><div class="line">        MyMoveHome = (int (*)()) dlsym(commandLayer_handle,<span class="stringliteral">&quot;MoveHome&quot;</span>);</div><div class="line"></div><div class="line">        <span class="comment">//If the was loaded correctly</span></div><div class="line">        <span class="keywordflow">if</span>((MyInitAPI == NULL) || (MyCloseAPI == NULL) || (MySendJoystickCommand == NULL) || (MyStartControlAPI == NULL))</div><div class="line">        {</div><div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Unable to initialize the command layer.&quot;</span> &lt;&lt; endl;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;The command has been initialized correctly.&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div><div class="line"></div><div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Calling the method InitAPI()&quot;</span> &lt;&lt; endl;</div><div class="line">                result = (*MyInitAPI)();</div><div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;result of InitAPI() = &quot;</span> &lt;&lt; result &lt;&lt; endl &lt;&lt; endl;</div><div class="line"></div><div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;We take control of the robotic arm.&quot;</span> &lt;&lt; endl;</div><div class="line">                result = (*MyStartControlAPI)();</div><div class="line"></div><div class="line">                <span class="comment">//We prepare the virtual joystick command that will be sent to the robotic arm.</span></div><div class="line">                <a class="code" href="struct_joystick_command.html">JoystickCommand</a> virtualCommand;</div><div class="line"></div><div class="line">                <span class="comment">//Initializing the command.</span></div><div class="line">                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="_kinova_types_8h.html#a3792c81f5808ad4f30000689ee0f0d07">JOYSTICK_BUTTON_COUNT</a>; i++)</div><div class="line">                {</div><div class="line">                        virtualCommand.<a class="code" href="struct_joystick_command.html#a70c0487834f7533fe5d3a7ef83f08bfa">ButtonValue</a>[i] = 0;</div><div class="line">                }</div><div class="line">                virtualCommand.InclineForwardBackward = 0;</div><div class="line">                virtualCommand.InclineLeftRight = 0;</div><div class="line">                virtualCommand.MoveForwardBackward = 0;</div><div class="line">                virtualCommand.MoveLeftRight = 0;</div><div class="line">                virtualCommand.PushPull = 0;</div><div class="line">                virtualCommand.Rotate = 0;</div><div class="line"></div><div class="line">                virtualCommand.Rotate = 0;</div><div class="line"></div><div class="line">                (*MyMoveHome)();</div><div class="line"></div><div class="line">                (*MySendJoystickCommand)(virtualCommand);</div><div class="line"></div><div class="line">                virtualCommand.Rotate = 1;</div><div class="line"></div><div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Sending the command to the robotic arm.&quot;</span> &lt;&lt; endl;</div><div class="line">                <span class="comment">//Every 1 ms we send a new virtual joystick command</span></div><div class="line">                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 400; i++)</div><div class="line">                {</div><div class="line">                        (*MySendJoystickCommand)(virtualCommand);</div><div class="line"></div><div class="line">                        usleep(1000);</div><div class="line">                }</div><div class="line"></div><div class="line">                <span class="comment">//Waiting 3 seconds</span></div><div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;The robotic arm will now move backward from where it comes.&quot;</span> &lt;&lt; endl;</div><div class="line"></div><div class="line">                <span class="comment">//we send the command backward</span></div><div class="line">                virtualCommand.Rotate = -1;</div><div class="line"></div><div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Sending the command backward to the robotic arm.&quot;</span> &lt;&lt; endl;</div><div class="line">                <span class="comment">//Every 1 ms we send a new virtual joystick command</span></div><div class="line">                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 400; i++)</div><div class="line">                {</div><div class="line">                        (*MySendJoystickCommand)(virtualCommand);</div><div class="line"></div><div class="line">                        usleep(1000);</div><div class="line">                }</div><div class="line"></div><div class="line">                virtualCommand.Rotate = 0;</div><div class="line"></div><div class="line">                (*MySendJoystickCommand)(virtualCommand);</div><div class="line"></div><div class="line">                cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Calling the method CloseAPI()&quot;</span> &lt;&lt; endl;</div><div class="line">                result = (*MyCloseAPI)();</div><div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;result of CloseAPI() = &quot;</span> &lt;&lt; result &lt;&lt; endl;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_39dc0668bd5a501998f94e8b4e546c71.html">media</a></li><li class="navelem"><a class="el" href="dir_3dcb450403490374dccfd9648ef0ab2b.html">eabitbol</a></li><li class="navelem"><a class="el" href="dir_ca05869e074fbe2eaa19bc6cd26fe686.html">FILE_VOLUME</a></li><li class="navelem"><a class="el" href="dir_5559387701be919b0bc8a24d1c9e4245.html">Bitbucket</a></li><li class="navelem"><a class="el" href="dir_672ea0b83a284d2a50a31f0323271bb9.html">sdk_ubuntu</a></li><li class="navelem"><a class="el" href="dir_b248890234d371253209e71bbf824974.html">API</a></li><li class="navelem"><a class="el" href="dir_2f76ad3a0ceb7532bc7fcf1188f37756.html">USBCommandLayerUbuntu</a></li><li class="navelem"><a class="el" href="dir_7f7786be023132c4dfad76e83b23a82a.html">Projects</a></li><li class="navelem"><a class="el" href="dir_3662ade3160b0f27e852abc2ca7f07df.html">Eclipse</a></li><li class="navelem"><a class="el" href="_kinova_8_a_p_i_8_usb_command_layer_ubuntu_8h.html">Kinova.API.UsbCommandLayerUbuntu.h</a></li>
    <li class="footer">Generated on Tue Jan 24 2017 13:03:49 for Kinova API Documentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
